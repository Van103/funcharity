/* Animated Background Styles */

.animated-bg-container {
  position: fixed;
  inset: 0;
  z-index: -1;
  overflow: hidden;
  pointer-events: none;
  contain: layout style paint;
}

/* Static fallback */
.static-bg .static-gradient {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    hsl(var(--background)) 0%,
    hsl(270 50% 8%) 50%,
    hsl(var(--background)) 100%
  );
}

/* Base gradient layer */
.bg-gradient-layer {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse 80% 50% at 50% 0%,
    hsl(270 60% 15% / 0.4),
    transparent 50%
  ),
  radial-gradient(
    ellipse 60% 40% at 80% 100%,
    hsl(45 70% 30% / 0.15),
    transparent 50%
  ),
  linear-gradient(
    180deg,
    hsl(var(--background)) 0%,
    hsl(270 40% 6%) 100%
  );
}

/* Variant-specific gradients */
.bg-variant-home .bg-gradient-layer {
  background: radial-gradient(
    ellipse 100% 60% at 50% -20%,
    hsl(270 70% 20% / 0.5),
    transparent 60%
  ),
  radial-gradient(
    ellipse 80% 50% at 100% 50%,
    hsl(45 80% 35% / 0.1),
    transparent 50%
  ),
  linear-gradient(
    180deg,
    hsl(var(--background)) 0%,
    hsl(270 50% 5%) 100%
  );
}

.bg-variant-profile .bg-gradient-layer {
  background: radial-gradient(
    ellipse 70% 40% at 30% 20%,
    hsl(270 60% 18% / 0.4),
    transparent 50%
  ),
  radial-gradient(
    ellipse 50% 30% at 90% 80%,
    hsl(45 70% 30% / 0.12),
    transparent 40%
  ),
  linear-gradient(
    180deg,
    hsl(var(--background)) 0%,
    hsl(270 45% 7%) 100%
  );
}

.bg-variant-editor .bg-gradient-layer {
  background: radial-gradient(
    ellipse 60% 30% at 20% 10%,
    hsl(270 50% 15% / 0.3),
    transparent 40%
  ),
  linear-gradient(
    180deg,
    hsl(var(--background)) 0%,
    hsl(270 35% 8%) 100%
  );
}

/* Parallax layers */
.parallax-layer {
  position: absolute;
  inset: 0;
  will-change: transform;
}

.layer-0 {
  transform: translateZ(0);
  opacity: 0.3;
}

.layer-1 {
  transform: translateZ(0);
  opacity: 0.5;
}

.layer-2 {
  transform: translateZ(0);
  opacity: 0.7;
}

/* Floating elements */
.floating-element {
  position: absolute;
  left: var(--x);
  top: var(--y);
  transform: scale(var(--scale));
  color: hsl(var(--secondary));
  will-change: transform, opacity;
}

.floating-element.diamond {
  color: hsl(270 60% 60%);
}

.floating-element.crown {
  color: hsl(45 80% 55%);
}

.floating-element.angel {
  color: hsl(280 50% 70%);
}

.floating-element.heart {
  color: hsl(340 70% 60%);
}

/* Animation states */
.floating-element.animate {
  animation: 
    float var(--duration) ease-in-out infinite,
    drift var(--duration) linear infinite,
    twinkle calc(var(--duration) * 0.5) ease-in-out infinite alternate;
  animation-delay: var(--delay), var(--delay), var(--delay);
}

.floating-element.angel.animate {
  animation: 
    angelFloat var(--duration) ease-in-out infinite,
    angelDrift var(--duration) linear infinite,
    twinkle calc(var(--duration) * 0.5) ease-in-out infinite alternate;
}

.floating-element.static {
  opacity: 0.4;
}

/* Keyframes */
@keyframes float {
  0%, 100% {
    transform: scale(var(--scale)) translateY(0) rotate(0deg);
  }
  25% {
    transform: scale(var(--scale)) translateY(-15px) rotate(5deg);
  }
  50% {
    transform: scale(var(--scale)) translateY(-8px) rotate(0deg);
  }
  75% {
    transform: scale(var(--scale)) translateY(-20px) rotate(-5deg);
  }
}

@keyframes drift {
  0% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(30px);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes angelFloat {
  0%, 100% {
    transform: scale(var(--scale)) translateY(0) translateX(0);
  }
  25% {
    transform: scale(var(--scale)) translateY(-25px) translateX(15px);
  }
  50% {
    transform: scale(var(--scale)) translateY(-10px) translateX(30px);
  }
  75% {
    transform: scale(var(--scale)) translateY(-30px) translateX(15px);
  }
}

@keyframes angelDrift {
  0% {
    transform: translateX(0) rotate(-3deg);
  }
  25% {
    transform: translateX(50px) rotate(3deg);
  }
  50% {
    transform: translateX(100px) rotate(-3deg);
  }
  75% {
    transform: translateX(50px) rotate(3deg);
  }
  100% {
    transform: translateX(0) rotate(-3deg);
  }
}

@keyframes twinkle {
  0% {
    opacity: 0.3;
  }
  100% {
    opacity: 0.8;
  }
}

/* Shimmer overlay */
.shimmer-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    45deg,
    transparent 40%,
    hsl(45 80% 60% / 0.03) 50%,
    transparent 60%
  );
  background-size: 200% 200%;
  animation: shimmer 15s ease-in-out infinite;
}

@keyframes shimmer {
  0%, 100% {
    background-position: 200% 200%;
  }
  50% {
    background-position: -100% -100%;
  }
}

/* Reduced motion */
.reduced-motion .floating-element,
.reduced-motion .shimmer-overlay {
  animation: none !important;
}

.reduced-motion .floating-element {
  opacity: 0.4;
}

.reduced-motion .shimmer-overlay {
  opacity: 0;
}

/* Tab hidden - pause animations */
.tab-hidden .animated-bg-container * {
  animation-play-state: paused !important;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .floating-element {
    animation-duration: calc(var(--duration) * 1.5) !important;
  }
  
  .layer-0 {
    display: none;
  }
}

/* Prefer reduced motion system setting */
@media (prefers-reduced-motion: reduce) {
  .floating-element.animate {
    animation: none;
    opacity: 0.4;
  }
  
  .shimmer-overlay {
    animation: none;
    opacity: 0;
  }
}
